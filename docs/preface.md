# 前言

## 我的故事

我是一名软件工程师，我喜欢编程，我喜欢写代码，我喜欢解决问题，我喜欢学习新的技术，我喜欢分享我的知识，我喜欢分享我的经验，我喜欢分享我的故事。

我在 2007 年从苏州大学毕业，做了几年的销售支持，但是在工作期间，我总是喜欢通过写代码的方式解决一些实际问题。那时候，使用的电脑并没有任何软件开发工具，并且也没有安装的权限。但是，日常工作中，Excel
却少不了，我从生手到熟练，然后进阶开始使用 Excel 强大的公式系统。但是，仍然想做一些更多的事情，公式系统满足不了。于是我开始学习
VBA，并且使用 VBA 做了一套完整的应用程序（不仅仅是宏扩展）。其中最重要的一个功能是数据报表的生成。每个月，销售部门都要抽调两个人来完成复杂的销售报表制作、分发、以及销售计划的制定。我使用
VBA
完成了这个任务，每个月只需要几分钟就可以完成，当然，这些只是将人们从重复性的劳动中解放出来。而关于销售计划的制定，则相对更加有技术含量。我使用了指数平滑这个时间序列分析法，将销售数据进行预测，然后根据预测结果制定销售计划，一改之前纯粹的拍脑袋的做法，这是我最自豪的一件事情。

在 2010 年，我终于下定决心，辞去了销售支持的工作，决心成为一名程序员。但是这个过程很曲折，由于没有相关工作经验，一般公司都不敢贸然发我
Offer。记得一次，我上机完成了所有的面试题，面试官说这是我最近看到的做得最好的，但是你没有真正的经验呀，让我怎么相信你？

大约找了半年的工作，终于收到一个软件外包公司的软件测试员的 Offer，虽然不是我想要的工作，但我接了，因为太需要一份工作了。不过，我继续在寻找全职软件开发的机会，终于在
2013 年，我入职了一家外企，成为了一名软件开发工程师。这是我人生中最重要的一次转变，我终于成为了一名程序员。

在这家外企，我学到很多工作方法、流程、工具等。后来，我发现公司的内部系统，每个系统都有一个自己的账号体系，在使用不同的系统时，需要频繁的切换账号，这是非常繁琐的。于是我开始思考，能不能做一个统一的账号体系，让用户只需要记住一个账号，就可以访问所有的系统呢？为了更加简化员工的认知负担，以及管理员的操作负担，我最终将自己参与的系统，都对接了公司的域账号。因为不管是认证，在入职时都会分配一个域账号，而在离职时，都会被禁用。因此将公司的内部系统集成域账号是非常自然也最省心的，使用域账号登录的功能上线后，我非常开心，虽然没有将公司的所有系统都对接上，但是已经取得了很好的成果。

后来我离职了，经历了几家创业公司，后来又经历了几家头部外企，深度参与了它们的数字化转型过程。但有意思的是，每次入职一家新公司，前面一个月都是在修复系统中的登录注册问题。这其中，有一些是明显的编码错误，有一些是过度设计，搞得不必要地复杂了。我观察到，无论是小的创业公司，还是大的外企，怎么就做不好登录注册呢？投入大量的广告费吸引用户使用它们的产品，而一打开，在登录注册上就遇到了问题，这是非常不合理的。于是，有一次在一个技术群里，我吐槽说，
**在登录注册上，每家公司都在自造轮子，但造的轮子，还千奇百怪，方的、三角的等等不一而足**。

因此，结合自己的工作经验，我开始思考，能不能总结一下登录注册的最佳实践呢？

再后来，随着前后端分离的实践越来越成为主流，而我开始更聚焦后端开发后，发现经历过的多数企业（无论创业小公司还是跨国大企业）的后端服务基本上都是在“裸奔”的状态，或者也是定制化开发了一些不完备的接口鉴权机制。这时我发现，之前在解决用户级别的登录认证问题时积累的知识，在服务之间的认证问题上，也能部分地应用上。

我在解决自己碰到的问题时，喜欢以博客的形式将相关经验发布在网上，并渐渐地收到遇到类似问题的同行们的咨询。随着解决相关问题的经验越来越多，我想，不如将它们系统地整理成册，以备自己和同行们参考。于是，我开始写这本书，希望能够帮助到大家。重点介绍现有的解决方案，以及给出详细的对接示例。并且推荐各个企业或者个人，在登录注册以及服务认证这件事上，采用标准的解决方案。这样不仅比定制化开发更节省成本，而且还更安全，并可以防止出现明显的错误。

## 关于本书

如果从战略和战术层面来分类，本书无疑是属于战术级别的。相对来说，理论部分偏少，而实战部分丰富。对于每一个例子，都不仅有详细的代码实例，而且有真实的在线运行着的产品（对于不便展示的企业产品，也会提供一个简略的个人版）。

书中不会罗列全部代码，只重点介绍核心部分，但是保证有完整的代码，并且放在 GitHub 上。如果你想要看完整的代码，可以在 GitHub 上下载。具体的地址在每个实例的最后都有提到，并且这些实例都会有至少一个在线运行的版本，其访问链接也会具体附在每个实例的最后。

本书的目标读者是有一定编程基础的人，比如有一定的前端开发经验，或者有一定的后端开发经验。如果你是一个产品经理，或者是一个运营人员，你也可以阅读本书，了解一下登录注册、服务认证的最佳实践。